(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},e.apply(this,arguments)}const{Button:t}=wp.components,{Component:s,createElement:i}=wp.element,n=class extends s{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.state={isChecked:!1,isClicked:!1}}handleChange(e){if("clicked"===e)return e='{"date" : "'+this.props.currentTime.date+'", "date_gmt" : "'+this.props.currentTime.date_gmt+'", "status" : "publish"}',this.setState({isClicked:!0}),this.setState({isChecked:!1}),this.props.editPost(e),void this.props.savePost()}render(){return this.props.isScheduled&&!this.props.isPublished?i(t,{isPrimary:!0,onClick:()=>{this.handleChange("clicked")}},this.props.publish):null}},{Button:r}=wp.components,{Component:h,createElement:l}=wp.element,p=class extends h{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.state={isChecked:!1,isClicked:!1,prevent_future_post:!1}}handleChange(e){if("clicked"===e)return this.setState({isClicked:!0}),this.setState({isChecked:!1}),this.setState({prevent_future_post:!0}),e='{"status" : "publish"}',this.props.editPost(e),this.props.setMetaValue({prevent_future_post:!0,date_type:"future"}),void this.props.savePost()}render(){return this.props.isScheduled&&!this.props.isPublished?l(r,{isPrimary:!0,onClick:()=>{this.handleChange("clicked")}},this.props.publish):null}},{compose:o,ifCondition:a,withInstanceId:u}=wp.compose,{withSelect:d,withDispatch:c}=wp.data,{PluginPostStatusInfo:m}=wp.editPost,{Component:b,createElement:C,useState:P}=wp.element,{CheckboxControl:g}=wp.components,{publishImmediately:w,publishFutureDate:f,currentTime:y,publish_button_off:v,allowedPostTypes:S}=WPSchedulePostsFree,k=o([d((e=>{const{getCurrentPostType:t,getEditedPostAttribute:s,isCurrentPostScheduled:i,isCurrentPostPublished:n,getCurrentPost:r}=e("core/editor");return{postType:t(),meta:s("meta"),isScheduled:i(),isPublished:n(),post:r()}})),c(((e,t)=>{let{meta:s}=t;const{editPost:i,savePost:n}=e("core/editor");return{editPost(e){var t=JSON.parse(e);"string"==typeof t&&(t=JSON.parse(t)),i({date:t.date,date_gmt:t.date_gmt,status:t.status})},setMetaValue:function(e){i({meta:e})},savePost:n}})),a((e=>{let{postType:t}=e;return S.includes(t),!0}))])(class extends b{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.state={showHelp:!1,publishImmediately:!1}}handleChange(e){}render(){return""==v||!this.props.isScheduled||this.props.isPublished?"":C(m,null,C("div",{className:"sc-publish-future"},C("div",null,C(g,{label:"Publish future post immediately",checked:this.state.publishImmediately,onChange:e=>this.setState({publishImmediately:e})}),C("a",{id:"wpscp-future-post-help-handler",href:"javascript:void();",title:"Show/Hide Help",onClick:()=>{this.setState({showHelp:!this.state.showHelp})}},"(?)")),this.state.publishImmediately&&C("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:10}},C(n,e({},this.props,{currentTime:y,publish:w})),C(p,e({},this.props,{currentTime:y,publish:f}))),this.state.showHelp&&C("div",null,"If you schedule this post and check this option then your post will be published immediately but post date-time will not set current date. Post date-time will be your scheduled future date-time.")))}}),{registerPlugin:_}=wp.plugins;_("wps-publish-button",{render:k})})();